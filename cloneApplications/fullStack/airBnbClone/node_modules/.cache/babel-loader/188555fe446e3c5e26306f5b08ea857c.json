{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/esm/createSuper\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport Trigger from 'rc-trigger';\nimport raf from \"rc-util/es/raf\";\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport CSSMotion from 'rc-motion';\nimport classNames from 'classnames';\nimport { connect } from 'mini-store';\nimport SubPopupMenu from './SubPopupMenu';\nimport { placements, placementsRtl } from './placements';\nimport { noop, loopMenuItemRecursively, getMenuIdFromSubMenuEventKey, menuAllProps } from './util';\nvar guid = 0;\nvar popupPlacementMap = {\n  horizontal: 'bottomLeft',\n  vertical: 'rightTop',\n  'vertical-left': 'rightTop',\n  'vertical-right': 'leftTop'\n};\n\nvar updateDefaultActiveFirst = function updateDefaultActiveFirst(store, eventKey, defaultActiveFirst) {\n  var menuId = getMenuIdFromSubMenuEventKey(eventKey);\n  var state = store.getState();\n  store.setState({\n    defaultActiveFirst: _objectSpread(_objectSpread({}, state.defaultActiveFirst), {}, _defineProperty({}, menuId, defaultActiveFirst))\n  });\n};\n\nexport var SubMenu = /*#__PURE__*/function (_React$Component) {\n  _inherits(SubMenu, _React$Component);\n\n  var _super = _createSuper(SubMenu);\n\n  function SubMenu(props) {\n    var _this;\n\n    _classCallCheck(this, SubMenu);\n\n    _this = _super.call(this, props);\n\n    _this.onDestroy = function (key) {\n      _this.props.onDestroy(key);\n    };\n    /**\n     * note:\n     *  This legacy code that `onKeyDown` is called by parent instead of dom self.\n     *  which need return code to check if this event is handled\n     */\n\n\n    _this.onKeyDown = function (e) {\n      var keyCode = e.keyCode;\n      var menu = _this.menuInstance;\n      var store = _this.props.store;\n\n      var visible = _this.getVisible();\n\n      if (keyCode === KeyCode.ENTER) {\n        _this.onTitleClick(e);\n\n        updateDefaultActiveFirst(store, _this.props.eventKey, true);\n        return true;\n      }\n\n      if (keyCode === KeyCode.RIGHT) {\n        if (visible) {\n          menu.onKeyDown(e);\n        } else {\n          _this.triggerOpenChange(true); // need to update current menu's defaultActiveFirst value\n\n\n          updateDefaultActiveFirst(store, _this.props.eventKey, true);\n        }\n\n        return true;\n      }\n\n      if (keyCode === KeyCode.LEFT) {\n        var handled;\n\n        if (visible) {\n          handled = menu.onKeyDown(e);\n        } else {\n          return undefined;\n        }\n\n        if (!handled) {\n          _this.triggerOpenChange(false);\n\n          handled = true;\n        }\n\n        return handled;\n      }\n\n      if (visible && (keyCode === KeyCode.UP || keyCode === KeyCode.DOWN)) {\n        return menu.onKeyDown(e);\n      }\n\n      return undefined;\n    };\n\n    _this.onOpenChange = function (e) {\n      _this.props.onOpenChange(e);\n    };\n\n    _this.onPopupVisibleChange = function (visible) {\n      _this.triggerOpenChange(visible, visible ? 'mouseenter' : 'mouseleave');\n    };\n\n    _this.onMouseEnter = function (e) {\n      var _this$props = _this.props,\n          key = _this$props.eventKey,\n          onMouseEnter = _this$props.onMouseEnter,\n          store = _this$props.store;\n      updateDefaultActiveFirst(store, _this.props.eventKey, false);\n      onMouseEnter({\n        key: key,\n        domEvent: e\n      });\n    };\n\n    _this.onMouseLeave = function (e) {\n      var _this$props2 = _this.props,\n          parentMenu = _this$props2.parentMenu,\n          eventKey = _this$props2.eventKey,\n          onMouseLeave = _this$props2.onMouseLeave;\n      parentMenu.subMenuInstance = _assertThisInitialized(_this);\n      onMouseLeave({\n        key: eventKey,\n        domEvent: e\n      });\n    };\n\n    _this.onTitleMouseEnter = function (domEvent) {\n      var _this$props3 = _this.props,\n          key = _this$props3.eventKey,\n          onItemHover = _this$props3.onItemHover,\n          onTitleMouseEnter = _this$props3.onTitleMouseEnter;\n      onItemHover({\n        key: key,\n        hover: true\n      });\n      onTitleMouseEnter({\n        key: key,\n        domEvent: domEvent\n      });\n    };\n\n    _this.onTitleMouseLeave = function (e) {\n      var _this$props4 = _this.props,\n          parentMenu = _this$props4.parentMenu,\n          eventKey = _this$props4.eventKey,\n          onItemHover = _this$props4.onItemHover,\n          onTitleMouseLeave = _this$props4.onTitleMouseLeave;\n      parentMenu.subMenuInstance = _assertThisInitialized(_this);\n      onItemHover({\n        key: eventKey,\n        hover: false\n      });\n      onTitleMouseLeave({\n        key: eventKey,\n        domEvent: e\n      });\n    };\n\n    _this.onTitleClick = function (e) {\n      var _assertThisInitialize = _assertThisInitialized(_this),\n          props = _assertThisInitialize.props;\n\n      props.onTitleClick({\n        key: props.eventKey,\n        domEvent: e\n      });\n\n      if (props.triggerSubMenuAction === 'hover') {\n        return;\n      }\n\n      _this.triggerOpenChange(!_this.getVisible(), 'click');\n\n      updateDefaultActiveFirst(props.store, _this.props.eventKey, false);\n    };\n\n    _this.onSubMenuClick = function (info) {\n      // in the case of overflowed submenu\n      // onClick is not copied over\n      if (typeof _this.props.onClick === 'function') {\n        _this.props.onClick(_this.addKeyPath(info));\n      }\n    };\n\n    _this.onSelect = function (info) {\n      _this.props.onSelect(info);\n    };\n\n    _this.onDeselect = function (info) {\n      _this.props.onDeselect(info);\n    };\n\n    _this.getPrefixCls = function () {\n      return \"\".concat(_this.props.rootPrefixCls, \"-submenu\");\n    };\n\n    _this.getActiveClassName = function () {\n      return \"\".concat(_this.getPrefixCls(), \"-active\");\n    };\n\n    _this.getDisabledClassName = function () {\n      return \"\".concat(_this.getPrefixCls(), \"-disabled\");\n    };\n\n    _this.getSelectedClassName = function () {\n      return \"\".concat(_this.getPrefixCls(), \"-selected\");\n    };\n\n    _this.getOpenClassName = function () {\n      return \"\".concat(_this.props.rootPrefixCls, \"-submenu-open\");\n    };\n\n    _this.getVisible = function () {\n      return _this.state.isOpen;\n    };\n\n    _this.getMode = function () {\n      return _this.state.mode;\n    };\n\n    _this.saveMenuInstance = function (c) {\n      // children menu instance\n      _this.menuInstance = c;\n    };\n\n    _this.addKeyPath = function (info) {\n      return _objectSpread(_objectSpread({}, info), {}, {\n        keyPath: (info.keyPath || []).concat(_this.props.eventKey)\n      });\n    };\n\n    _this.triggerOpenChange = function (open, type) {\n      var key = _this.props.eventKey;\n\n      var openChange = function openChange() {\n        _this.onOpenChange({\n          key: key,\n          item: _assertThisInitialized(_this),\n          trigger: type,\n          open: open\n        });\n      };\n\n      if (type === 'mouseenter') {\n        // make sure mouseenter happen after other menu item's mouseleave\n        _this.mouseenterTimeout = setTimeout(function () {\n          openChange();\n        }, 0);\n      } else {\n        openChange();\n      }\n    };\n\n    _this.isChildrenSelected = function () {\n      var ret = {\n        find: false\n      };\n      loopMenuItemRecursively(_this.props.children, _this.props.selectedKeys, ret);\n      return ret.find;\n    };\n\n    _this.isInlineMode = function () {\n      return _this.getMode() === 'inline';\n    };\n\n    _this.adjustWidth = function () {\n      /* istanbul ignore if */\n      if (!_this.subMenuTitle || !_this.menuInstance) {\n        return;\n      }\n\n      var popupMenu = ReactDOM.findDOMNode(_this.menuInstance);\n\n      if (popupMenu.offsetWidth >= _this.subMenuTitle.offsetWidth) {\n        return;\n      }\n      /* istanbul ignore next */\n\n\n      popupMenu.style.minWidth = \"\".concat(_this.subMenuTitle.offsetWidth, \"px\");\n    };\n\n    _this.saveSubMenuTitle = function (subMenuTitle) {\n      _this.subMenuTitle = subMenuTitle;\n    };\n\n    _this.getBaseProps = function () {\n      var _assertThisInitialize2 = _assertThisInitialized(_this),\n          props = _assertThisInitialize2.props;\n\n      var mergedMode = _this.getMode();\n\n      return {\n        mode: mergedMode === 'horizontal' ? 'vertical' : mergedMode,\n        visible: _this.getVisible(),\n        level: props.level + 1,\n        inlineIndent: props.inlineIndent,\n        focusable: false,\n        onClick: _this.onSubMenuClick,\n        onSelect: _this.onSelect,\n        onDeselect: _this.onDeselect,\n        onDestroy: _this.onDestroy,\n        selectedKeys: props.selectedKeys,\n        eventKey: \"\".concat(props.eventKey, \"-menu-\"),\n        openKeys: props.openKeys,\n        motion: props.motion,\n        onOpenChange: _this.onOpenChange,\n        subMenuOpenDelay: props.subMenuOpenDelay,\n        parentMenu: _assertThisInitialized(_this),\n        subMenuCloseDelay: props.subMenuCloseDelay,\n        forceSubMenuRender: props.forceSubMenuRender,\n        triggerSubMenuAction: props.triggerSubMenuAction,\n        builtinPlacements: props.builtinPlacements,\n        defaultActiveFirst: props.store.getState().defaultActiveFirst[getMenuIdFromSubMenuEventKey(props.eventKey)],\n        multiple: props.multiple,\n        prefixCls: props.rootPrefixCls,\n        id: _this.internalMenuId,\n        manualRef: _this.saveMenuInstance,\n        itemIcon: props.itemIcon,\n        expandIcon: props.expandIcon,\n        direction: props.direction\n      };\n    };\n\n    _this.getMotion = function (mode, visible) {\n      var _assertThisInitialize3 = _assertThisInitialized(_this),\n          haveRendered = _assertThisInitialize3.haveRendered;\n\n      var _this$props5 = _this.props,\n          motion = _this$props5.motion,\n          rootPrefixCls = _this$props5.rootPrefixCls; // don't show transition on first rendering (no animation for opened menu)\n      // show appear transition if it's not visible (not sure why)\n      // show appear transition if it's not inline mode\n\n      var mergedMotion = _objectSpread(_objectSpread({}, motion), {}, {\n        leavedClassName: \"\".concat(rootPrefixCls, \"-hidden\"),\n        removeOnLeave: false,\n        motionAppear: haveRendered || !visible || mode !== 'inline'\n      });\n\n      return mergedMotion;\n    };\n\n    var store = props.store,\n        eventKey = props.eventKey;\n\n    var _store$getState = store.getState(),\n        defaultActiveFirst = _store$getState.defaultActiveFirst;\n\n    _this.isRootMenu = false;\n    var value = false;\n\n    if (defaultActiveFirst) {\n      value = defaultActiveFirst[eventKey];\n    }\n\n    updateDefaultActiveFirst(store, eventKey, value);\n    _this.state = {\n      mode: props.mode,\n      isOpen: props.isOpen\n    };\n    return _this;\n  }\n\n  _createClass(SubMenu, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.componentDidUpdate();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      var _this2 = this;\n\n      var _this$props6 = this.props,\n          mode = _this$props6.mode,\n          parentMenu = _this$props6.parentMenu,\n          manualRef = _this$props6.manualRef,\n          isOpen = _this$props6.isOpen;\n\n      var updateState = function updateState() {\n        _this2.setState({\n          mode: mode,\n          isOpen: isOpen\n        });\n      }; // Delay sync when mode changed in case openKeys change not sync\n\n\n      var isOpenChanged = isOpen !== this.state.isOpen;\n      var isModeChanged = mode !== this.state.mode;\n\n      if (isModeChanged || isOpenChanged) {\n        raf.cancel(this.updateStateRaf);\n\n        if (isModeChanged) {\n          this.updateStateRaf = raf(updateState);\n        } else {\n          updateState();\n        }\n      } // invoke customized ref to expose component to mixin\n\n\n      if (manualRef) {\n        manualRef(this);\n      }\n\n      if (mode !== 'horizontal' || !(parentMenu === null || parentMenu === void 0 ? void 0 : parentMenu.isRootMenu) || !isOpen) {\n        return;\n      }\n\n      this.minWidthTimeout = setTimeout(function () {\n        return _this2.adjustWidth();\n      }, 0);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var _this$props7 = this.props,\n          onDestroy = _this$props7.onDestroy,\n          eventKey = _this$props7.eventKey;\n\n      if (onDestroy) {\n        onDestroy(eventKey);\n      }\n      /* istanbul ignore if */\n\n\n      if (this.minWidthTimeout) {\n        clearTimeout(this.minWidthTimeout);\n      }\n      /* istanbul ignore if */\n\n\n      if (this.mouseenterTimeout) {\n        clearTimeout(this.mouseenterTimeout);\n      }\n\n      raf.cancel(this.updateStateRaf);\n    }\n  }, {\n    key: \"renderPopupMenu\",\n    value: function renderPopupMenu(className, style) {\n      var baseProps = this.getBaseProps();\n      /**\n       * zombiej: Why SubPopupMenu here?\n       * Seems whatever popup or inline mode both will render SubPopupMenu.\n       * It's controlled by Trigger for popup or not.\n       */\n\n      return /*#__PURE__*/React.createElement(SubPopupMenu, Object.assign({}, baseProps, {\n        id: this.internalMenuId,\n        className: className,\n        style: style\n      }), this.props.children);\n    }\n  }, {\n    key: \"renderChildren\",\n    value: function renderChildren() {\n      var _this3 = this;\n\n      var baseProps = this.getBaseProps();\n      var mode = baseProps.mode,\n          visible = baseProps.visible,\n          forceSubMenuRender = baseProps.forceSubMenuRender,\n          direction = baseProps.direction; // [Legacy] getMotion must be called before `haveRendered`\n\n      var mergedMotion = this.getMotion(mode, visible);\n      this.haveRendered = true;\n      this.haveOpened = this.haveOpened || visible || forceSubMenuRender; // never rendered not planning to, don't render\n\n      if (!this.haveOpened) {\n        return /*#__PURE__*/React.createElement(\"div\", null);\n      }\n\n      var sharedClassName = classNames(\"\".concat(baseProps.prefixCls, \"-sub\"), _defineProperty({}, \"\".concat(baseProps.prefixCls, \"-rtl\"), direction === 'rtl'));\n\n      if (!this.isInlineMode()) {\n        return this.renderPopupMenu(sharedClassName);\n      }\n\n      return /*#__PURE__*/React.createElement(CSSMotion, Object.assign({\n        visible: baseProps.visible\n      }, mergedMotion), function (_ref) {\n        var className = _ref.className,\n            style = _ref.style;\n        var mergedClassName = classNames(sharedClassName, className);\n        return _this3.renderPopupMenu(mergedClassName, style);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _classNames2, _props$parentMenu, _classNames3;\n\n      var props = _objectSpread({}, this.props);\n\n      var visible = this.getVisible();\n      var prefixCls = this.getPrefixCls();\n      var inline = this.isInlineMode();\n      var mergedMode = this.getMode();\n      var className = classNames(prefixCls, \"\".concat(prefixCls, \"-\").concat(mergedMode), (_classNames2 = {}, _defineProperty(_classNames2, props.className, !!props.className), _defineProperty(_classNames2, this.getOpenClassName(), visible), _defineProperty(_classNames2, this.getActiveClassName(), props.active || visible && !inline), _defineProperty(_classNames2, this.getDisabledClassName(), props.disabled), _defineProperty(_classNames2, this.getSelectedClassName(), this.isChildrenSelected()), _classNames2));\n\n      if (!this.internalMenuId) {\n        if (props.eventKey) {\n          this.internalMenuId = \"\".concat(props.eventKey, \"$Menu\");\n        } else {\n          guid += 1;\n          this.internalMenuId = \"$__$\".concat(guid, \"$Menu\");\n        }\n      }\n\n      var mouseEvents = {};\n      var titleClickEvents = {};\n      var titleMouseEvents = {};\n\n      if (!props.disabled) {\n        mouseEvents = {\n          onMouseLeave: this.onMouseLeave,\n          onMouseEnter: this.onMouseEnter\n        }; // only works in title, not outer li\n\n        titleClickEvents = {\n          onClick: this.onTitleClick\n        };\n        titleMouseEvents = {\n          onMouseEnter: this.onTitleMouseEnter,\n          onMouseLeave: this.onTitleMouseLeave\n        };\n      }\n\n      var style = {};\n      var direction = props.direction;\n      var isRTL = direction === 'rtl';\n\n      if (inline) {\n        if (isRTL) {\n          style.paddingRight = props.inlineIndent * props.level;\n        } else {\n          style.paddingLeft = props.inlineIndent * props.level;\n        }\n      }\n\n      var ariaOwns = {}; // only set aria-owns when menu is open\n      // otherwise it would be an invalid aria-owns value\n      // since corresponding node cannot be found\n\n      if (this.getVisible()) {\n        ariaOwns = {\n          'aria-owns': this.internalMenuId\n        };\n      } // expand custom icon should NOT be displayed in menu with horizontal mode.\n\n\n      var icon = null;\n\n      if (mergedMode !== 'horizontal') {\n        icon = this.props.expandIcon; // ReactNode\n\n        if (typeof this.props.expandIcon === 'function') {\n          icon = /*#__PURE__*/React.createElement(this.props.expandIcon, _objectSpread({}, this.props));\n        }\n      }\n\n      var title = /*#__PURE__*/React.createElement(\"div\", Object.assign({\n        ref: this.saveSubMenuTitle,\n        style: style,\n        className: \"\".concat(prefixCls, \"-title\"),\n        role: \"button\"\n      }, titleMouseEvents, titleClickEvents, {\n        \"aria-expanded\": visible\n      }, ariaOwns, {\n        \"aria-haspopup\": \"true\",\n        title: typeof props.title === 'string' ? props.title : undefined\n      }), props.title, icon || /*#__PURE__*/React.createElement(\"i\", {\n        className: \"\".concat(prefixCls, \"-arrow\")\n      }));\n      var children = this.renderChildren();\n      var getPopupContainer = ((_props$parentMenu = props.parentMenu) === null || _props$parentMenu === void 0 ? void 0 : _props$parentMenu.isRootMenu) ? props.parentMenu.props.getPopupContainer : function (triggerNode) {\n        return triggerNode.parentNode;\n      };\n      var popupPlacement = popupPlacementMap[mergedMode];\n      var popupAlign = props.popupOffset ? {\n        offset: props.popupOffset\n      } : {};\n      var popupClassName = classNames((_classNames3 = {}, _defineProperty(_classNames3, props.popupClassName, props.popupClassName && !inline), _defineProperty(_classNames3, \"\".concat(prefixCls, \"-rtl\"), isRTL), _classNames3));\n      var disabled = props.disabled,\n          triggerSubMenuAction = props.triggerSubMenuAction,\n          subMenuOpenDelay = props.subMenuOpenDelay,\n          forceSubMenuRender = props.forceSubMenuRender,\n          subMenuCloseDelay = props.subMenuCloseDelay,\n          builtinPlacements = props.builtinPlacements;\n      menuAllProps.forEach(function (key) {\n        return delete props[key];\n      }); // Set onClick to null, to ignore propagated onClick event\n\n      delete props.onClick;\n      var placement = isRTL ? Object.assign({}, placementsRtl, builtinPlacements) : Object.assign({}, placements, builtinPlacements);\n      delete props.direction; // [Legacy] It's a fast fix,\n      // but we should check if we can refactor this to make code more easy to understand\n\n      var baseProps = this.getBaseProps();\n      var mergedMotion = inline ? null : this.getMotion(baseProps.mode, baseProps.visible);\n      return /*#__PURE__*/React.createElement(\"li\", Object.assign({}, props, mouseEvents, {\n        className: className,\n        role: \"menuitem\"\n      }), /*#__PURE__*/React.createElement(Trigger, {\n        prefixCls: prefixCls,\n        popupClassName: classNames(\"\".concat(prefixCls, \"-popup\"), popupClassName),\n        getPopupContainer: getPopupContainer,\n        builtinPlacements: placement,\n        popupPlacement: popupPlacement,\n        popupVisible: inline ? false : visible,\n        popupAlign: popupAlign,\n        popup: inline ? null : children,\n        action: disabled || inline ? [] : [triggerSubMenuAction],\n        mouseEnterDelay: subMenuOpenDelay,\n        mouseLeaveDelay: subMenuCloseDelay,\n        onPopupVisibleChange: this.onPopupVisibleChange,\n        forceRender: forceSubMenuRender,\n        popupMotion: mergedMotion\n      }, title), inline ? children : null);\n    }\n  }]);\n\n  return SubMenu;\n}(React.Component);\nSubMenu.defaultProps = {\n  onMouseEnter: noop,\n  onMouseLeave: noop,\n  onTitleMouseEnter: noop,\n  onTitleMouseLeave: noop,\n  onTitleClick: noop,\n  manualRef: noop,\n  mode: 'vertical',\n  title: ''\n};\nvar connected = connect(function (_ref2, _ref3) {\n  var openKeys = _ref2.openKeys,\n      activeKey = _ref2.activeKey,\n      selectedKeys = _ref2.selectedKeys;\n  var eventKey = _ref3.eventKey,\n      subMenuKey = _ref3.subMenuKey;\n  return {\n    isOpen: openKeys.indexOf(eventKey) > -1,\n    active: activeKey[subMenuKey] === eventKey,\n    selectedKeys: selectedKeys\n  };\n})(SubMenu);\nconnected.isSubMenu = true;\nexport default connected;","map":{"version":3,"names":["_classCallCheck","_createClass","_assertThisInitialized","_inherits","_createSuper","_defineProperty","_objectSpread","React","ReactDOM","Trigger","raf","KeyCode","CSSMotion","classNames","connect","SubPopupMenu","placements","placementsRtl","noop","loopMenuItemRecursively","getMenuIdFromSubMenuEventKey","menuAllProps","guid","popupPlacementMap","horizontal","vertical","updateDefaultActiveFirst","store","eventKey","defaultActiveFirst","menuId","state","getState","setState","SubMenu","_React$Component","_super","props","_this","call","onDestroy","key","onKeyDown","e","keyCode","menu","menuInstance","visible","getVisible","ENTER","onTitleClick","RIGHT","triggerOpenChange","LEFT","handled","undefined","UP","DOWN","onOpenChange","onPopupVisibleChange","onMouseEnter","_this$props","domEvent","onMouseLeave","_this$props2","parentMenu","subMenuInstance","onTitleMouseEnter","_this$props3","onItemHover","hover","onTitleMouseLeave","_this$props4","_assertThisInitialize","triggerSubMenuAction","onSubMenuClick","info","onClick","addKeyPath","onSelect","onDeselect","getPrefixCls","concat","rootPrefixCls","getActiveClassName","getDisabledClassName","getSelectedClassName","getOpenClassName","isOpen","getMode","mode","saveMenuInstance","c","keyPath","open","type","openChange","item","trigger","mouseenterTimeout","setTimeout","isChildrenSelected","ret","find","children","selectedKeys","isInlineMode","adjustWidth","subMenuTitle","popupMenu","findDOMNode","offsetWidth","style","minWidth","saveSubMenuTitle","getBaseProps","_assertThisInitialize2","mergedMode","level","inlineIndent","focusable","openKeys","motion","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","builtinPlacements","multiple","prefixCls","id","internalMenuId","manualRef","itemIcon","expandIcon","direction","getMotion","_assertThisInitialize3","haveRendered","_this$props5","mergedMotion","leavedClassName","removeOnLeave","motionAppear","_store$getState","isRootMenu","value","componentDidMount","componentDidUpdate","_this2","_this$props6","updateState","isOpenChanged","isModeChanged","cancel","updateStateRaf","minWidthTimeout","componentWillUnmount","_this$props7","clearTimeout","renderPopupMenu","className","baseProps","createElement","Object","assign","renderChildren","_this3","haveOpened","sharedClassName","_ref","mergedClassName","render","_classNames2","_props$parentMenu","_classNames3","inline","active","disabled","mouseEvents","titleClickEvents","titleMouseEvents","isRTL","paddingRight","paddingLeft","ariaOwns","icon","title","ref","role","getPopupContainer","triggerNode","parentNode","popupPlacement","popupAlign","popupOffset","offset","popupClassName","forEach","placement","popupVisible","popup","action","mouseEnterDelay","mouseLeaveDelay","forceRender","popupMotion","Component","defaultProps","connected","_ref2","_ref3","activeKey","subMenuKey","indexOf","isSubMenu"],"sources":["/Users/laurenmcguire/Desktop/portfolio_projects/cloneApplications/fullStack/airBnbClone/node_modules/rc-menu/es/SubMenu.js"],"sourcesContent":["import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/esm/createSuper\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport Trigger from 'rc-trigger';\nimport raf from \"rc-util/es/raf\";\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport CSSMotion from 'rc-motion';\nimport classNames from 'classnames';\nimport { connect } from 'mini-store';\nimport SubPopupMenu from './SubPopupMenu';\nimport { placements, placementsRtl } from './placements';\nimport { noop, loopMenuItemRecursively, getMenuIdFromSubMenuEventKey, menuAllProps } from './util';\nvar guid = 0;\nvar popupPlacementMap = {\n  horizontal: 'bottomLeft',\n  vertical: 'rightTop',\n  'vertical-left': 'rightTop',\n  'vertical-right': 'leftTop'\n};\n\nvar updateDefaultActiveFirst = function updateDefaultActiveFirst(store, eventKey, defaultActiveFirst) {\n  var menuId = getMenuIdFromSubMenuEventKey(eventKey);\n  var state = store.getState();\n  store.setState({\n    defaultActiveFirst: _objectSpread(_objectSpread({}, state.defaultActiveFirst), {}, _defineProperty({}, menuId, defaultActiveFirst))\n  });\n};\n\nexport var SubMenu = /*#__PURE__*/function (_React$Component) {\n  _inherits(SubMenu, _React$Component);\n\n  var _super = _createSuper(SubMenu);\n\n  function SubMenu(props) {\n    var _this;\n\n    _classCallCheck(this, SubMenu);\n\n    _this = _super.call(this, props);\n\n    _this.onDestroy = function (key) {\n      _this.props.onDestroy(key);\n    };\n    /**\n     * note:\n     *  This legacy code that `onKeyDown` is called by parent instead of dom self.\n     *  which need return code to check if this event is handled\n     */\n\n\n    _this.onKeyDown = function (e) {\n      var keyCode = e.keyCode;\n      var menu = _this.menuInstance;\n      var store = _this.props.store;\n\n      var visible = _this.getVisible();\n\n      if (keyCode === KeyCode.ENTER) {\n        _this.onTitleClick(e);\n\n        updateDefaultActiveFirst(store, _this.props.eventKey, true);\n        return true;\n      }\n\n      if (keyCode === KeyCode.RIGHT) {\n        if (visible) {\n          menu.onKeyDown(e);\n        } else {\n          _this.triggerOpenChange(true); // need to update current menu's defaultActiveFirst value\n\n\n          updateDefaultActiveFirst(store, _this.props.eventKey, true);\n        }\n\n        return true;\n      }\n\n      if (keyCode === KeyCode.LEFT) {\n        var handled;\n\n        if (visible) {\n          handled = menu.onKeyDown(e);\n        } else {\n          return undefined;\n        }\n\n        if (!handled) {\n          _this.triggerOpenChange(false);\n\n          handled = true;\n        }\n\n        return handled;\n      }\n\n      if (visible && (keyCode === KeyCode.UP || keyCode === KeyCode.DOWN)) {\n        return menu.onKeyDown(e);\n      }\n\n      return undefined;\n    };\n\n    _this.onOpenChange = function (e) {\n      _this.props.onOpenChange(e);\n    };\n\n    _this.onPopupVisibleChange = function (visible) {\n      _this.triggerOpenChange(visible, visible ? 'mouseenter' : 'mouseleave');\n    };\n\n    _this.onMouseEnter = function (e) {\n      var _this$props = _this.props,\n          key = _this$props.eventKey,\n          onMouseEnter = _this$props.onMouseEnter,\n          store = _this$props.store;\n      updateDefaultActiveFirst(store, _this.props.eventKey, false);\n      onMouseEnter({\n        key: key,\n        domEvent: e\n      });\n    };\n\n    _this.onMouseLeave = function (e) {\n      var _this$props2 = _this.props,\n          parentMenu = _this$props2.parentMenu,\n          eventKey = _this$props2.eventKey,\n          onMouseLeave = _this$props2.onMouseLeave;\n      parentMenu.subMenuInstance = _assertThisInitialized(_this);\n      onMouseLeave({\n        key: eventKey,\n        domEvent: e\n      });\n    };\n\n    _this.onTitleMouseEnter = function (domEvent) {\n      var _this$props3 = _this.props,\n          key = _this$props3.eventKey,\n          onItemHover = _this$props3.onItemHover,\n          onTitleMouseEnter = _this$props3.onTitleMouseEnter;\n      onItemHover({\n        key: key,\n        hover: true\n      });\n      onTitleMouseEnter({\n        key: key,\n        domEvent: domEvent\n      });\n    };\n\n    _this.onTitleMouseLeave = function (e) {\n      var _this$props4 = _this.props,\n          parentMenu = _this$props4.parentMenu,\n          eventKey = _this$props4.eventKey,\n          onItemHover = _this$props4.onItemHover,\n          onTitleMouseLeave = _this$props4.onTitleMouseLeave;\n      parentMenu.subMenuInstance = _assertThisInitialized(_this);\n      onItemHover({\n        key: eventKey,\n        hover: false\n      });\n      onTitleMouseLeave({\n        key: eventKey,\n        domEvent: e\n      });\n    };\n\n    _this.onTitleClick = function (e) {\n      var _assertThisInitialize = _assertThisInitialized(_this),\n          props = _assertThisInitialize.props;\n\n      props.onTitleClick({\n        key: props.eventKey,\n        domEvent: e\n      });\n\n      if (props.triggerSubMenuAction === 'hover') {\n        return;\n      }\n\n      _this.triggerOpenChange(!_this.getVisible(), 'click');\n\n      updateDefaultActiveFirst(props.store, _this.props.eventKey, false);\n    };\n\n    _this.onSubMenuClick = function (info) {\n      // in the case of overflowed submenu\n      // onClick is not copied over\n      if (typeof _this.props.onClick === 'function') {\n        _this.props.onClick(_this.addKeyPath(info));\n      }\n    };\n\n    _this.onSelect = function (info) {\n      _this.props.onSelect(info);\n    };\n\n    _this.onDeselect = function (info) {\n      _this.props.onDeselect(info);\n    };\n\n    _this.getPrefixCls = function () {\n      return \"\".concat(_this.props.rootPrefixCls, \"-submenu\");\n    };\n\n    _this.getActiveClassName = function () {\n      return \"\".concat(_this.getPrefixCls(), \"-active\");\n    };\n\n    _this.getDisabledClassName = function () {\n      return \"\".concat(_this.getPrefixCls(), \"-disabled\");\n    };\n\n    _this.getSelectedClassName = function () {\n      return \"\".concat(_this.getPrefixCls(), \"-selected\");\n    };\n\n    _this.getOpenClassName = function () {\n      return \"\".concat(_this.props.rootPrefixCls, \"-submenu-open\");\n    };\n\n    _this.getVisible = function () {\n      return _this.state.isOpen;\n    };\n\n    _this.getMode = function () {\n      return _this.state.mode;\n    };\n\n    _this.saveMenuInstance = function (c) {\n      // children menu instance\n      _this.menuInstance = c;\n    };\n\n    _this.addKeyPath = function (info) {\n      return _objectSpread(_objectSpread({}, info), {}, {\n        keyPath: (info.keyPath || []).concat(_this.props.eventKey)\n      });\n    };\n\n    _this.triggerOpenChange = function (open, type) {\n      var key = _this.props.eventKey;\n\n      var openChange = function openChange() {\n        _this.onOpenChange({\n          key: key,\n          item: _assertThisInitialized(_this),\n          trigger: type,\n          open: open\n        });\n      };\n\n      if (type === 'mouseenter') {\n        // make sure mouseenter happen after other menu item's mouseleave\n        _this.mouseenterTimeout = setTimeout(function () {\n          openChange();\n        }, 0);\n      } else {\n        openChange();\n      }\n    };\n\n    _this.isChildrenSelected = function () {\n      var ret = {\n        find: false\n      };\n      loopMenuItemRecursively(_this.props.children, _this.props.selectedKeys, ret);\n      return ret.find;\n    };\n\n    _this.isInlineMode = function () {\n      return _this.getMode() === 'inline';\n    };\n\n    _this.adjustWidth = function () {\n      /* istanbul ignore if */\n      if (!_this.subMenuTitle || !_this.menuInstance) {\n        return;\n      }\n\n      var popupMenu = ReactDOM.findDOMNode(_this.menuInstance);\n\n      if (popupMenu.offsetWidth >= _this.subMenuTitle.offsetWidth) {\n        return;\n      }\n      /* istanbul ignore next */\n\n\n      popupMenu.style.minWidth = \"\".concat(_this.subMenuTitle.offsetWidth, \"px\");\n    };\n\n    _this.saveSubMenuTitle = function (subMenuTitle) {\n      _this.subMenuTitle = subMenuTitle;\n    };\n\n    _this.getBaseProps = function () {\n      var _assertThisInitialize2 = _assertThisInitialized(_this),\n          props = _assertThisInitialize2.props;\n\n      var mergedMode = _this.getMode();\n\n      return {\n        mode: mergedMode === 'horizontal' ? 'vertical' : mergedMode,\n        visible: _this.getVisible(),\n        level: props.level + 1,\n        inlineIndent: props.inlineIndent,\n        focusable: false,\n        onClick: _this.onSubMenuClick,\n        onSelect: _this.onSelect,\n        onDeselect: _this.onDeselect,\n        onDestroy: _this.onDestroy,\n        selectedKeys: props.selectedKeys,\n        eventKey: \"\".concat(props.eventKey, \"-menu-\"),\n        openKeys: props.openKeys,\n        motion: props.motion,\n        onOpenChange: _this.onOpenChange,\n        subMenuOpenDelay: props.subMenuOpenDelay,\n        parentMenu: _assertThisInitialized(_this),\n        subMenuCloseDelay: props.subMenuCloseDelay,\n        forceSubMenuRender: props.forceSubMenuRender,\n        triggerSubMenuAction: props.triggerSubMenuAction,\n        builtinPlacements: props.builtinPlacements,\n        defaultActiveFirst: props.store.getState().defaultActiveFirst[getMenuIdFromSubMenuEventKey(props.eventKey)],\n        multiple: props.multiple,\n        prefixCls: props.rootPrefixCls,\n        id: _this.internalMenuId,\n        manualRef: _this.saveMenuInstance,\n        itemIcon: props.itemIcon,\n        expandIcon: props.expandIcon,\n        direction: props.direction\n      };\n    };\n\n    _this.getMotion = function (mode, visible) {\n      var _assertThisInitialize3 = _assertThisInitialized(_this),\n          haveRendered = _assertThisInitialize3.haveRendered;\n\n      var _this$props5 = _this.props,\n          motion = _this$props5.motion,\n          rootPrefixCls = _this$props5.rootPrefixCls; // don't show transition on first rendering (no animation for opened menu)\n      // show appear transition if it's not visible (not sure why)\n      // show appear transition if it's not inline mode\n\n      var mergedMotion = _objectSpread(_objectSpread({}, motion), {}, {\n        leavedClassName: \"\".concat(rootPrefixCls, \"-hidden\"),\n        removeOnLeave: false,\n        motionAppear: haveRendered || !visible || mode !== 'inline'\n      });\n\n      return mergedMotion;\n    };\n\n    var store = props.store,\n        eventKey = props.eventKey;\n\n    var _store$getState = store.getState(),\n        defaultActiveFirst = _store$getState.defaultActiveFirst;\n\n    _this.isRootMenu = false;\n    var value = false;\n\n    if (defaultActiveFirst) {\n      value = defaultActiveFirst[eventKey];\n    }\n\n    updateDefaultActiveFirst(store, eventKey, value);\n    _this.state = {\n      mode: props.mode,\n      isOpen: props.isOpen\n    };\n    return _this;\n  }\n\n  _createClass(SubMenu, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.componentDidUpdate();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      var _this2 = this;\n\n      var _this$props6 = this.props,\n          mode = _this$props6.mode,\n          parentMenu = _this$props6.parentMenu,\n          manualRef = _this$props6.manualRef,\n          isOpen = _this$props6.isOpen;\n\n      var updateState = function updateState() {\n        _this2.setState({\n          mode: mode,\n          isOpen: isOpen\n        });\n      }; // Delay sync when mode changed in case openKeys change not sync\n\n\n      var isOpenChanged = isOpen !== this.state.isOpen;\n      var isModeChanged = mode !== this.state.mode;\n\n      if (isModeChanged || isOpenChanged) {\n        raf.cancel(this.updateStateRaf);\n\n        if (isModeChanged) {\n          this.updateStateRaf = raf(updateState);\n        } else {\n          updateState();\n        }\n      } // invoke customized ref to expose component to mixin\n\n\n      if (manualRef) {\n        manualRef(this);\n      }\n\n      if (mode !== 'horizontal' || !(parentMenu === null || parentMenu === void 0 ? void 0 : parentMenu.isRootMenu) || !isOpen) {\n        return;\n      }\n\n      this.minWidthTimeout = setTimeout(function () {\n        return _this2.adjustWidth();\n      }, 0);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var _this$props7 = this.props,\n          onDestroy = _this$props7.onDestroy,\n          eventKey = _this$props7.eventKey;\n\n      if (onDestroy) {\n        onDestroy(eventKey);\n      }\n      /* istanbul ignore if */\n\n\n      if (this.minWidthTimeout) {\n        clearTimeout(this.minWidthTimeout);\n      }\n      /* istanbul ignore if */\n\n\n      if (this.mouseenterTimeout) {\n        clearTimeout(this.mouseenterTimeout);\n      }\n\n      raf.cancel(this.updateStateRaf);\n    }\n  }, {\n    key: \"renderPopupMenu\",\n    value: function renderPopupMenu(className, style) {\n      var baseProps = this.getBaseProps();\n      /**\n       * zombiej: Why SubPopupMenu here?\n       * Seems whatever popup or inline mode both will render SubPopupMenu.\n       * It's controlled by Trigger for popup or not.\n       */\n\n      return /*#__PURE__*/React.createElement(SubPopupMenu, Object.assign({}, baseProps, {\n        id: this.internalMenuId,\n        className: className,\n        style: style\n      }), this.props.children);\n    }\n  }, {\n    key: \"renderChildren\",\n    value: function renderChildren() {\n      var _this3 = this;\n\n      var baseProps = this.getBaseProps();\n      var mode = baseProps.mode,\n          visible = baseProps.visible,\n          forceSubMenuRender = baseProps.forceSubMenuRender,\n          direction = baseProps.direction; // [Legacy] getMotion must be called before `haveRendered`\n\n      var mergedMotion = this.getMotion(mode, visible);\n      this.haveRendered = true;\n      this.haveOpened = this.haveOpened || visible || forceSubMenuRender; // never rendered not planning to, don't render\n\n      if (!this.haveOpened) {\n        return /*#__PURE__*/React.createElement(\"div\", null);\n      }\n\n      var sharedClassName = classNames(\"\".concat(baseProps.prefixCls, \"-sub\"), _defineProperty({}, \"\".concat(baseProps.prefixCls, \"-rtl\"), direction === 'rtl'));\n\n      if (!this.isInlineMode()) {\n        return this.renderPopupMenu(sharedClassName);\n      }\n\n      return /*#__PURE__*/React.createElement(CSSMotion, Object.assign({\n        visible: baseProps.visible\n      }, mergedMotion), function (_ref) {\n        var className = _ref.className,\n            style = _ref.style;\n        var mergedClassName = classNames(sharedClassName, className);\n        return _this3.renderPopupMenu(mergedClassName, style);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _classNames2, _props$parentMenu, _classNames3;\n\n      var props = _objectSpread({}, this.props);\n\n      var visible = this.getVisible();\n      var prefixCls = this.getPrefixCls();\n      var inline = this.isInlineMode();\n      var mergedMode = this.getMode();\n      var className = classNames(prefixCls, \"\".concat(prefixCls, \"-\").concat(mergedMode), (_classNames2 = {}, _defineProperty(_classNames2, props.className, !!props.className), _defineProperty(_classNames2, this.getOpenClassName(), visible), _defineProperty(_classNames2, this.getActiveClassName(), props.active || visible && !inline), _defineProperty(_classNames2, this.getDisabledClassName(), props.disabled), _defineProperty(_classNames2, this.getSelectedClassName(), this.isChildrenSelected()), _classNames2));\n\n      if (!this.internalMenuId) {\n        if (props.eventKey) {\n          this.internalMenuId = \"\".concat(props.eventKey, \"$Menu\");\n        } else {\n          guid += 1;\n          this.internalMenuId = \"$__$\".concat(guid, \"$Menu\");\n        }\n      }\n\n      var mouseEvents = {};\n      var titleClickEvents = {};\n      var titleMouseEvents = {};\n\n      if (!props.disabled) {\n        mouseEvents = {\n          onMouseLeave: this.onMouseLeave,\n          onMouseEnter: this.onMouseEnter\n        }; // only works in title, not outer li\n\n        titleClickEvents = {\n          onClick: this.onTitleClick\n        };\n        titleMouseEvents = {\n          onMouseEnter: this.onTitleMouseEnter,\n          onMouseLeave: this.onTitleMouseLeave\n        };\n      }\n\n      var style = {};\n      var direction = props.direction;\n      var isRTL = direction === 'rtl';\n\n      if (inline) {\n        if (isRTL) {\n          style.paddingRight = props.inlineIndent * props.level;\n        } else {\n          style.paddingLeft = props.inlineIndent * props.level;\n        }\n      }\n\n      var ariaOwns = {}; // only set aria-owns when menu is open\n      // otherwise it would be an invalid aria-owns value\n      // since corresponding node cannot be found\n\n      if (this.getVisible()) {\n        ariaOwns = {\n          'aria-owns': this.internalMenuId\n        };\n      } // expand custom icon should NOT be displayed in menu with horizontal mode.\n\n\n      var icon = null;\n\n      if (mergedMode !== 'horizontal') {\n        icon = this.props.expandIcon; // ReactNode\n\n        if (typeof this.props.expandIcon === 'function') {\n          icon = /*#__PURE__*/React.createElement(this.props.expandIcon, _objectSpread({}, this.props));\n        }\n      }\n\n      var title = /*#__PURE__*/React.createElement(\"div\", Object.assign({\n        ref: this.saveSubMenuTitle,\n        style: style,\n        className: \"\".concat(prefixCls, \"-title\"),\n        role: \"button\"\n      }, titleMouseEvents, titleClickEvents, {\n        \"aria-expanded\": visible\n      }, ariaOwns, {\n        \"aria-haspopup\": \"true\",\n        title: typeof props.title === 'string' ? props.title : undefined\n      }), props.title, icon || /*#__PURE__*/React.createElement(\"i\", {\n        className: \"\".concat(prefixCls, \"-arrow\")\n      }));\n      var children = this.renderChildren();\n      var getPopupContainer = ((_props$parentMenu = props.parentMenu) === null || _props$parentMenu === void 0 ? void 0 : _props$parentMenu.isRootMenu) ? props.parentMenu.props.getPopupContainer : function (triggerNode) {\n        return triggerNode.parentNode;\n      };\n      var popupPlacement = popupPlacementMap[mergedMode];\n      var popupAlign = props.popupOffset ? {\n        offset: props.popupOffset\n      } : {};\n      var popupClassName = classNames((_classNames3 = {}, _defineProperty(_classNames3, props.popupClassName, props.popupClassName && !inline), _defineProperty(_classNames3, \"\".concat(prefixCls, \"-rtl\"), isRTL), _classNames3));\n      var disabled = props.disabled,\n          triggerSubMenuAction = props.triggerSubMenuAction,\n          subMenuOpenDelay = props.subMenuOpenDelay,\n          forceSubMenuRender = props.forceSubMenuRender,\n          subMenuCloseDelay = props.subMenuCloseDelay,\n          builtinPlacements = props.builtinPlacements;\n      menuAllProps.forEach(function (key) {\n        return delete props[key];\n      }); // Set onClick to null, to ignore propagated onClick event\n\n      delete props.onClick;\n      var placement = isRTL ? Object.assign({}, placementsRtl, builtinPlacements) : Object.assign({}, placements, builtinPlacements);\n      delete props.direction; // [Legacy] It's a fast fix,\n      // but we should check if we can refactor this to make code more easy to understand\n\n      var baseProps = this.getBaseProps();\n      var mergedMotion = inline ? null : this.getMotion(baseProps.mode, baseProps.visible);\n      return /*#__PURE__*/React.createElement(\"li\", Object.assign({}, props, mouseEvents, {\n        className: className,\n        role: \"menuitem\"\n      }), /*#__PURE__*/React.createElement(Trigger, {\n        prefixCls: prefixCls,\n        popupClassName: classNames(\"\".concat(prefixCls, \"-popup\"), popupClassName),\n        getPopupContainer: getPopupContainer,\n        builtinPlacements: placement,\n        popupPlacement: popupPlacement,\n        popupVisible: inline ? false : visible,\n        popupAlign: popupAlign,\n        popup: inline ? null : children,\n        action: disabled || inline ? [] : [triggerSubMenuAction],\n        mouseEnterDelay: subMenuOpenDelay,\n        mouseLeaveDelay: subMenuCloseDelay,\n        onPopupVisibleChange: this.onPopupVisibleChange,\n        forceRender: forceSubMenuRender,\n        popupMotion: mergedMotion\n      }, title), inline ? children : null);\n    }\n  }]);\n\n  return SubMenu;\n}(React.Component);\nSubMenu.defaultProps = {\n  onMouseEnter: noop,\n  onMouseLeave: noop,\n  onTitleMouseEnter: noop,\n  onTitleMouseLeave: noop,\n  onTitleClick: noop,\n  manualRef: noop,\n  mode: 'vertical',\n  title: ''\n};\nvar connected = connect(function (_ref2, _ref3) {\n  var openKeys = _ref2.openKeys,\n      activeKey = _ref2.activeKey,\n      selectedKeys = _ref2.selectedKeys;\n  var eventKey = _ref3.eventKey,\n      subMenuKey = _ref3.subMenuKey;\n  return {\n    isOpen: openKeys.indexOf(eventKey) > -1,\n    active: activeKey[subMenuKey] === eventKey,\n    selectedKeys: selectedKeys\n  };\n})(SubMenu);\nconnected.isSubMenu = true;\nexport default connected;"],"mappings":"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"},"metadata":{},"sourceType":"module"}